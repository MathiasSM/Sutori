<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Sutori.TAC</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="https://github.com/MathiasSM/Sutori/blob/master/src/Sutori/TAC.hs">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">sutori-0.2.4: Sutori language compiler</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Sutori.TAC</p></div><div id="description"><p class="caption">Description</p><div class="doc empty">&nbsp;</div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:TACTable">TACTable</a> = <a href="#v:TACTable">TACTable</a> {<ul class="subs"><li><a href="#v:tacInstructions">tacInstructions</a> :: [<a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a>]</li><li><a href="#v:tacTriplets">tacTriplets</a> :: [<a href="Sutori-TAC.html#t:TAC">TAC</a>]</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:TACAddress">TACAddress</a><ul class="subs"><li>= <a href="#v:TACGlobal">TACGlobal</a> <a href="Sutori-Utils.html#t:SutID">SutID</a></li><li>| <a href="#v:TACOffset">TACOffset</a> <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></li><li>| <a href="#v:TACLit">TACLit</a> <a href="Sutori-AST-Nodes.html#t:SutLiteral">SutLiteral</a></li><li>| <a href="#v:TACID">TACID</a> <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></li><li>| <a href="#v:TACLabel">TACLabel</a> <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></li><li>| <a href="#v:TACFun">TACFun</a> <a href="Sutori-Utils.html#t:SutID">SutID</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:TACType">TACType</a><ul class="subs"><li>= <a href="#v:Basic">Basic</a> { <ul class="subs"><li><a href="#v:tacOp">tacOp</a> :: <a href="Sutori-AST-Nodes.html#t:SutOperator">SutOperator</a></li></ul> }</li><li>| <a href="#v:SysCall">SysCall</a> { <ul class="subs"><li><a href="#v:tacSys">tacSys</a> :: <a href="Sutori-TAC-TAC.html#t:SutSys">SutSys</a></li></ul> }</li><li>| <a href="#v:Copy">Copy</a></li><li>| <a href="#v:Addr">Addr</a></li><li>| <a href="#v:Jump">Jump</a></li><li>| <a href="#v:JumpUnless">JumpUnless</a></li><li>| <a href="#v:Pointed">Pointed</a></li><li>| <a href="#v:Param">Param</a></li><li>| <a href="#v:Call">Call</a></li><li>| <a href="#v:Return">Return</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:TAC">TAC</a><ul class="subs"><li>= <a href="#v:TAC">TAC</a> { <ul class="subs"><li><a href="#v:tacType">tacType</a> :: <a href="Sutori-TAC.html#t:TACType">TACType</a></li><li><a href="#v:tac1">tac1</a> :: <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Sutori-TAC.html#t:TACAddress">TACAddress</a></li><li><a href="#v:tac2">tac2</a> :: <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Sutori-TAC.html#t:TACAddress">TACAddress</a></li></ul> }</li><li>| <a href="#v:Label">Label</a> <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></li><li>| <a href="#v:FunLabel">FunLabel</a> <a href="Sutori-Utils.html#t:SutID">SutID</a></li></ul></li><li class="src short"><a href="#v:addTAC">addTAC</a> :: <a href="Sutori-TAC.html#t:TAC">TAC</a> -&gt; <a href="Sutori-Monad-Monad.html#t:SutMonad">SutMonad</a> <a href="Sutori-TAC.html#t:TACAddress">TACAddress</a></li><li class="src short"><a href="#v:genCode">genCode</a> :: <a href="Sutori-Monad-Monad.html#t:SutMonad">SutMonad</a> <a href="Sutori-TAC.html#t:TACTable">TACTable</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TACTable" class="def">TACTable</a> <a href="https://github.com/MathiasSM/Sutori/blob/master/src/Sutori/TAC/TAC.hs#L18" class="link">Source</a> <a href="#t:TACTable" class="selflink">#</a></p><div class="doc"><p>The actual generated code is a list of instruction triplets and a list of pointers to them</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TACTable" class="def">TACTable</a></td><td class="doc"><p>Table of triplets</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:tacInstructions" class="def">tacInstructions</a> :: [<a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a>]</dfn><div class="doc"><p>Table of pointers to triplets</p></div></li><li><dfn class="src"><a id="v:tacTriplets" class="def">tacTriplets</a> :: [<a href="Sutori-TAC.html#t:TAC">TAC</a>]</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TACAddress" class="def">TACAddress</a> <a href="https://github.com/MathiasSM/Sutori/blob/master/src/Sutori/TAC/TAC.hs#L23" class="link">Source</a> <a href="#t:TACAddress" class="selflink">#</a></p><div class="doc"><p>TACAddress for TAC Instructions</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TACGlobal" class="def">TACGlobal</a> <a href="Sutori-Utils.html#t:SutID">SutID</a></td><td class="doc"><p>An actual ID from the source code. Used for global (scope 0) variables</p></td></tr><tr><td class="src"><a id="v:TACOffset" class="def">TACOffset</a> <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>An offset from the current frame pointer</p></td></tr><tr><td class="src"><a id="v:TACLit" class="def">TACLit</a> <a href="Sutori-AST-Nodes.html#t:SutLiteral">SutLiteral</a></td><td class="doc"><p>A literal value either explicit in the source code or calculated on the run.</p></td></tr><tr><td class="src"><a id="v:TACID" class="def">TACID</a> <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>The TAC number that calculated the relevant expression.</p></td></tr><tr><td class="src"><a id="v:TACLabel" class="def">TACLabel</a> <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>An incremental label to some code.</p></td></tr><tr><td class="src"><a id="v:TACFun" class="def">TACFun</a> <a href="Sutori-Utils.html#t:SutID">SutID</a></td><td class="doc"><p>A function name/label</p></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TACType" class="def">TACType</a> <a href="https://github.com/MathiasSM/Sutori/blob/master/src/Sutori/TAC/TAC.hs#L43" class="link">Source</a> <a href="#t:TACType" class="selflink">#</a></p><div class="doc"><p>A TAC Instruction to be appended to the generated intermediate code</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Basic" class="def">Basic</a></td><td class="doc"><p>For simple expressions.</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:tacOp" class="def">tacOp</a> :: <a href="Sutori-AST-Nodes.html#t:SutOperator">SutOperator</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr><tr><td class="src"><a id="v:SysCall" class="def">SysCall</a></td><td class="doc"><p>Perform a syscall (IO, Mem, else)</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:tacSys" class="def">tacSys</a> :: <a href="Sutori-TAC-TAC.html#t:SutSys">SutSys</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr><tr><td class="src"><a id="v:Copy" class="def">Copy</a></td><td class="doc"><p>Copy operation, from a address to another</p></td></tr><tr><td class="src"><a id="v:Addr" class="def">Addr</a></td><td class="doc"><p>Address for an indirection</p></td></tr><tr><td class="src"><a id="v:Jump" class="def">Jump</a></td><td class="doc"><p>Unconditional jump, just where to.</p></td></tr><tr><td class="src"><a id="v:JumpUnless" class="def">JumpUnless</a></td><td class="doc"><p>Condition jump</p></td></tr><tr><td class="src"><a id="v:Pointed" class="def">Pointed</a></td><td class="doc"><p>Assign an address from a indirect pointer.</p></td></tr><tr><td class="src"><a id="v:Param" class="def">Param</a></td><td class="doc"><p>Stack a function parameter</p></td></tr><tr><td class="src"><a id="v:Call" class="def">Call</a></td><td class="doc"><p>Call a function of so many (already stacked) parameters</p></td></tr><tr><td class="src"><a id="v:Return" class="def">Return</a></td><td class="doc"><p>Return from a function (possibly a value).</p></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TAC" class="def">TAC</a> <a href="https://github.com/MathiasSM/Sutori/blob/master/src/Sutori/TAC/TAC.hs#L32" class="link">Source</a> <a href="#t:TAC" class="selflink">#</a></p><div class="doc"><p>TAC Instruction</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TAC" class="def">TAC</a></td><td class="doc"><p>An instruction</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:tacType" class="def">tacType</a> :: <a href="Sutori-TAC.html#t:TACType">TACType</a></dfn><div class="doc"><p>Operation to perform</p></div></li><li><dfn class="src"><a id="v:tac1" class="def">tac1</a> :: <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Sutori-TAC.html#t:TACAddress">TACAddress</a></dfn><div class="doc"><p>First address. Usually first operand.</p></div></li><li><dfn class="src"><a id="v:tac2" class="def">tac2</a> :: <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Sutori-TAC.html#t:TACAddress">TACAddress</a></dfn><div class="doc"><p>Second address. Usually second operand.</p></div></li></ul></div></td></tr><tr><td class="src"><a id="v:Label" class="def">Label</a> <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>A numbered label to output literally</p></td></tr><tr><td class="src"><a id="v:FunLabel" class="def">FunLabel</a> <a href="Sutori-Utils.html#t:SutID">SutID</a></td><td class="doc"><p>A string label to output literally</p></td></tr></table></div></div><div class="top"><p class="src"><a id="v:addTAC" class="def">addTAC</a> :: <a href="Sutori-TAC.html#t:TAC">TAC</a> -&gt; <a href="Sutori-Monad-Monad.html#t:SutMonad">SutMonad</a> <a href="Sutori-TAC.html#t:TACAddress">TACAddress</a> <a href="https://github.com/MathiasSM/Sutori/blob/master/src/Sutori/TAC/CodeGen.hs#L25" class="link">Source</a> <a href="#v:addTAC" class="selflink">#</a></p><div class="doc"><p>Appends to the TAC table a new triplet, references it on the instructions TAC table</p><p>Returns the Address of the inserted TAC</p></div></div><div class="top"><p class="src"><a id="v:genCode" class="def">genCode</a> :: <a href="Sutori-Monad-Monad.html#t:SutMonad">SutMonad</a> <a href="Sutori-TAC.html#t:TACTable">TACTable</a> <a href="https://github.com/MathiasSM/Sutori/blob/master/src/Sutori/TAC/CodeGen.hs#L49" class="link">Source</a> <a href="#v:genCode" class="selflink">#</a></p><div class="doc"><p>Generates code from the already built <code><a href="Sutori-Monad-State.html#v:mainModule">mainModule</a></code> AST</p><p>Generates in order: TAC for main/global code, then TACs for each function.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.1</p></div></body></html>